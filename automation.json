{"name":"Export an automation to GitHub","description":"This template is set up to save an automation to GitHub whenever it's updated. The automation is saved as a JSON file. Note that the GitHub connector can't store files larger than 15MB. You can modify this automation by alerting team members about the status of the update to GitHub.","workspace":{"blocks":[{"x":464,"y":15,"id":"3C20B071-E9B9-423B-8DF8-7AC02CAEB60F","name":"AutomationUpdated","type":"StartBlock","inputs":[{"id":"run_mode","type":"select","value":"webhook","structure":[]},{"id":"datasourcetype_guid","type":"select","value":"61a87510-c7a3-11ea-95da-0fb0c241e75c","structure":[],"displayValue":"Qlik Cloud Services"},{"id":"webhook_event_guid","type":"select","value":"d3958320-f77a-11ec-998f-979b98d5e4d7","structure":[],"displayValue":"Automation Updated"},{"id":"test_payload","type":"json","value":"{\n  \"data\": {\n    \"id\": \"d2c39090-fd1f-11ec-999f-09b41d3ae905\",\n    \"name\": \"Qlick Cloud webhook test\",\n    \"state\": \"available\",\n    \"ownerId\": \"VgOv_nOU4N9sPkUlQ894liG6MG0Lqj0k\",\n    \"runMode\": \"manual\",\n    \"spaceId\": null,\n    \"tenantId\": \"9DNJCWjedz8Ubgiun7WfH16CjPLQj_if\",\n    \"createdAt\": \"2022-07-06T11:36:06.000000Z\",\n    \"lastRunAt\": null,\n    \"schedules\": [\n      {\n        \"id\": \"d2cac040-fd1f-11ec-924a-8123a833bf18\",\n        \"stopAt\": null,\n        \"startAt\": null,\n        \"interval\": -1,\n        \"timezone\": \"Europe\/Bucharest\",\n        \"lastStartAt\": null\n      }\n    ],\n    \"updatedAt\": \"2022-07-06T11:37:23.000000Z\",\n    \"snippetIds\": [],\n    \"description\": \"test description\",\n    \"endpointIds\": [],\n    \"connectorIds\": [],\n    \"lastRunStatus\": null\n  },\n  \"source\": \"com.qlik\/automations\",\n  \"eventId\": \"00b42230-fd20-11ec-b880-d547fbe222ba\",\n  \"eventTime\": \"2022-07-06T11:37:23.422Z\",\n  \"eventType\": \"com.qlik.v1.automation.updated\",\n  \"extensions\": {\n    \"userId\": \"VgOv_nOU4N9sPkUlQ894liG6MG0Lqj0k\",\n    \"ownerId\": \"VgOv_nOU4N9sPkUlQ894liG6MG0Lqj0k\",\n    \"updates\": [\n      {\n        \"path\": \"\/description\",\n        \"newValue\": \"test description\",\n        \"oldValue\": null\n      },\n      {\n        \"path\": \"\/createdAt\",\n        \"newValue\": \"2022-07-06T11:36:06.000000Z\",\n        \"oldValue\": \"2022-07-06T11:36:06.000000Z\"\n      },\n      {\n        \"path\": \"\/updatedAt\",\n        \"newValue\": \"2022-07-06T11:37:23.000000Z\",\n        \"oldValue\": \"2022-07-06T11:36:06.000000Z\"\n      }\n    ],\n    \"tenantId\": \"9DNJCWjedz8Ubgiun7WfH16CjPLQj_if\",\n    \"description\": \"Automation updated\"\n  },\n  \"contentType\": \"application\/json\",\n  \"eventTypeVersion\": \"1.0.0\",\n  \"cloudEventsVersion\": \"0.1\"\n}","structure":[]},{"id":"webhook_documentation","type":"string","value":null,"structure":[]}],"childId":"61EE6296-7A3F-41E7-B09C-1FD71A3F1A8B","comment":"Configuration - set the run mode to webhook, select Qlik Cloud Services as the connector and then select the \"Automation updated event\".","disabled":false,"settings":[{"id":"automations_censor_data","type":"checkbox","value":false,"structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"displayName":"Automation Updated","loopBlockId":null},{"x":609,"y":1212,"id":"9BFBE796-3F7B-414D-8BA4-602227FF501A","name":"createBranch","type":"SnippetBlock","inputs":[{"id":"9eba70d0-1ed9-11ed-9ddc-9dd0fb7fb287","type":"string","value":"Harshalhajare","structure":[],"displayValue":"Harshalhajare"},{"id":"9ebbf060-1ed9-11ed-afa2-9f7291db7342","type":"string","value":"qlikcloud","structure":[],"displayValue":"qlikcloud"},{"id":"9ebcabc0-1ed9-11ed-bcd0-df5f43c0ceea","type":"string","value":"e572a1a05291fa57701cb94230482baf590d43a1","structure":[],"displayValue":"refs\/heads\/main"},{"id":"9ebdc940-1ed9-11ed-8015-f5fe505509e5","type":"string","value":"{ $.branchName }","structure":[]}],"childId":"00519E64-EB56-45D5-A295-6A09FE242212","comment":"Specify the Owner, Repository and From Reference input parameters. The do lookup functionality is available for all.","disabled":false,"settings":[{"id":"datasource","type":"select","value":"8a19be48-e946-4e58-8fec-885c9bb1401f","structure":[]},{"id":"blendr_on_error","type":"select","value":"stop","structure":[]},{"id":"automations_censor_data","type":"checkbox","value":false,"structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"displayName":"Git Hub - Create Branch","loopBlockId":null,"snippet_guid":"9eac2bb0-1ed9-11ed-8b73-814457c25da5","datasourcetype_guid":"0d87808f-27c0-11ea-921c-022e6b5ea1e2"},{"x":175,"y":303,"id":"A0A9FE9F-DDD7-421A-B67E-B71865A5318A","name":"getAutomation2","type":"EndpointBlock","inputs":[{"id":"637d42f0-cc60-11ec-ada3-9b34db8aacf6","type":"string","value":"{$.AutomationUpdated.data.id}","structure":[]}],"childId":"F8F017D4-887F-4393-984D-0771FCA14BF6","comment":null,"disabled":false,"settings":[{"id":"blendr_on_error","type":"select","value":"stop","structure":[]},{"id":"cache","type":"select","value":"0","structure":[]},{"id":"automations_censor_data","type":"checkbox","value":false,"structure":[]},{"id":"datasource","value":"e9e731bd-3936-4c93-a0f8-78db441ac732","displayValue":"Qlik Cloud Services"}],"collapsed":[{"name":"loop","isCollapsed":false}],"displayName":"Qlik Cloud Services - Get Automation 2","loopBlockId":null,"endpoint_guid":"63599d90-cc60-11ec-8627-27701235d734","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c"},{"x":489,"y":1252,"id":"00519E64-EB56-45D5-A295-6A09FE242212","name":"CreateOrUpdateFileContent","type":"SnippetBlock","inputs":[{"id":"70b4a4c0-4074-11ec-a8e6-c1dc761dcfb1","type":"string","value":"Harshalhajare","structure":[],"displayValue":"Harshalhajare"},{"id":"70b5c000-4074-11ec-969e-792346f99f92","type":"string","value":"qlikcloud","structure":[],"displayValue":"qlikcloud"},{"id":"70b63220-4074-11ec-b55b-7725e494603a","type":"string","value":"automation.json","structure":[]},{"id":"b27fff40-4074-11ec-9f16-55d8428ec62c","type":"string","value":"{ $.branchName }","structure":[]},{"id":"70b75130-4074-11ec-84ab-e102a3b0c185","type":"string","value":"new version for the automation modified on { $.AutomationUpdated.data.updatedAt }","structure":[]},{"id":"70b84f80-4074-11ec-9358-b5650774d83c","type":"string","value":"{base64encode: {json: {$.automationExport}}}","structure":[]},{"id":"09cb4810-1675-11ef-b5b9-9d279f1efa08","type":"string","value":null,"structure":[]},{"id":"09cc0110-1675-11ef-ad79-4d7c92bf3de3","type":"string","value":null,"structure":[]}],"childId":"901B47D5-2A82-48E4-BB77-A5CB7158DBC8","comment":"Specify the User and Repo parameters. The do lookup functionality is available for both.","disabled":false,"settings":[{"id":"datasource","type":"select","value":"8a19be48-e946-4e58-8fec-885c9bb1401f","structure":[]},{"id":"blendr_on_error","type":"select","value":"stop","structure":[]},{"id":"automations_censor_data","type":"checkbox","value":false,"structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"displayName":"Git Hub - Create Or Update File Content","loopBlockId":null,"snippet_guid":"70a930c0-4074-11ec-9bb6-b36e27de5d04","datasourcetype_guid":"0d87808f-27c0-11ea-921c-022e6b5ea1e2"},{"x":220,"y":1368,"id":"901B47D5-2A82-48E4-BB77-A5CB7158DBC8","name":"createPullRequest","type":"EndpointBlock","inputs":[{"id":"e6e87240-1ee9-11ed-9d00-3785e1aca73f","type":"string","value":"Harshalhajare","structure":[],"displayValue":"Harshalhajare"},{"id":"e6f18960-1ee9-11ed-a46e-e3baf7e46151","type":"string","value":"qlikcloud","structure":[],"displayValue":"qlikcloud"},{"id":"e70e78b0-1ee9-11ed-89bc-3fb25bbea0b0","type":"string","value":"{ $.branchName }","structure":[]},{"id":"e7178460-1ee9-11ed-aac4-5b2648b3e3c2","type":"string","value":"{ $.branchName }","structure":[]},{"id":"774a7250-1eea-11ed-a20f-79bf2609fe81","type":"string","value":"main","structure":[],"displayValue":"main"},{"id":"a5267490-1eea-11ed-a4d8-f5ddd930d117","type":"longtext","value":"Please merge.","structure":[]}],"childId":null,"comment":"Specify the Owner, Repo and Target Branch input parameters. The do lookup functionality is available for all.","disabled":false,"settings":[{"id":"datasource","type":"select","value":"8a19be48-e946-4e58-8fec-885c9bb1401f","structure":[]},{"id":"blendr_on_error","type":"select","value":"stop","structure":[]},{"id":"automations_censor_data","type":"checkbox","value":false,"structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"displayName":"GitHub - Create Pull Request","loopBlockId":null,"endpoint_guid":"e6b09740-1ee9-11ed-8cef-637581512ebf","datasourcetype_guid":"0d87808f-27c0-11ea-921c-022e6b5ea1e2"},{"x":100,"y":700,"id":"651FD3EB-499C-40DA-AFC4-E412E9435129","name":"condition2","type":"IfElseBlock","inputs":[{"id":"conditions","type":"custom","value":{"mode":"all","conditions":[{"input1":"{$.AutomationUpdated.data.id}","input2":"{$.automationId}","operator":"="}]},"structure":[]}],"childId":null,"comment":"Checking to see if updated automation is the same as the source automation.","disabled":false,"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"conditions":[],"childTrueId":"A0A9FE9F-DDD7-421A-B67E-B71865A5318A","displayName":"Condition 2","loopBlockId":null,"childFalseId":null},{"x":104,"y":184,"id":"61EE6296-7A3F-41E7-B09C-1FD71A3F1A8B","name":"automationId","type":"VariableBlock","inputs":[],"childId":"123AA271-CB44-4B39-87AA-E1D2BE72EC7F","comment":"Configuration - Specify the id of the source automation.","disabled":false,"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"operations":[{"id":"set_value","key":"0B4DED7B-15C3-4CEC-9B2F-B6E217A99B3E","name":"Set value of { variable }","value":"{ $.AutomationUpdated.data.id }"}],"displayName":"Variable - automationId","loopBlockId":null,"variableGuid":"16225039-03BD-4646-8349-89DAFAC38DD3"},{"x":97,"y":404,"id":"64D0FC6B-DC05-42E0-AB70-26A058076A3A","name":"condition","type":"IfElseBlock","inputs":[{"id":"conditions","type":"custom","value":{"mode":"all","conditions":[{"input1":"{$.automationId}","input2":null,"operator":"empty"}]},"structure":[]}],"childId":"651FD3EB-499C-40DA-AFC4-E412E9435129","comment":"Checking to see if the automationId has been filled in.","disabled":false,"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"conditions":[],"childTrueId":"1DEF0EAC-8346-49DF-8E30-2734AC9FB268","displayName":"Condition","loopBlockId":null,"childFalseId":null},{"x":209,"y":544,"id":"1DEF0EAC-8346-49DF-8E30-2734AC9FB268","name":"error","type":"ErrorBlock","inputs":[{"id":"message","type":"string","value":"Variable \"automationId\" is empty.","structure":[]},{"id":"action","type":"select","value":"stop","structure":[]}],"childId":null,"comment":"Alert the user and stop the automation.","disabled":false,"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"displayName":"Error","loopBlockId":null},{"x":464,"y":255,"id":"123AA271-CB44-4B39-87AA-E1D2BE72EC7F","name":"branchName","type":"VariableBlock","inputs":[],"childId":"64D0FC6B-DC05-42E0-AB70-26A058076A3A","comment":"Variable for the name of the new branch with date suffix. Feel free to customize this, branch names must be unique.","disabled":false,"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"operations":[{"id":"set_value","key":"B30B5D0F-1466-44F6-9BD0-7013B1D0C49A","name":"Set value of { variable }","value":"feature\/updateAutomation-{date: {$.AutomationUpdated.data.updatedAt}, 'U'}"}],"displayName":"Variable - branchName","loopBlockId":null,"variableGuid":"A2B5F577-A5E0-4413-8131-B23AA54E1686"},{"x":220,"y":900,"id":"F8F017D4-887F-4393-984D-0771FCA14BF6","name":"automationExport","type":"VariableBlock","inputs":[],"childId":"9BFBE796-3F7B-414D-8BA4-602227FF501A","comment":"Transform automation content to JSON object.","disabled":false,"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"operations":[{"id":"empty","key":"8CB560FD-56F9-4B77-9AA5-43A4080EB6A2","name":"Empty { variable }","value":null},{"id":"set_key_value","key":"102CF217-FC75-435F-94AE-28CFE795C30E","name":"Set key\/values of { variable }","value":[{"key":"name","value":"{$.getAutomation2.name}"},{"key":"description","value":"{$.getAutomation2.description}"},{"key":"workspace","value":"{$.getAutomation2.workspace}"},{"key":"schedules","value":"{$.getAutomation2.schedules}"}]}],"displayName":"Variable - automationExport","loopBlockId":null,"variableGuid":"49212122-DA91-4A33-BC9F-3DB598475744"}],"variables":[{"guid":"A2B5F577-A5E0-4413-8131-B23AA54E1686","name":"branchName","type":"string"},{"guid":"16225039-03BD-4646-8349-89DAFAC38DD3","name":"automationId","type":"string"},{"guid":"5DAA237A-1ACA-4A91-8009-7F88CC5F9C18","name":"repositoryName","type":"string"},{"guid":"14272657-EC1A-4368-ACA3-3FC73E60DE5D","name":"mainBranchName","type":"string"},{"guid":"7F7D1DED-7E06-4FF8-B088-93075F915CE1","name":"repositoryOwner","type":"string"},{"guid":"49212122-DA91-4A33-BC9F-3DB598475744","name":"automationExport","type":"object"}]},"schedules":[{"id":"e5388bc8-6e29-4a01-bfa8-a125c02eed45","startAt":null,"stopAt":null,"lastStartAt":null,"interval":-1,"timezone":"Europe\/Vienna"}]}